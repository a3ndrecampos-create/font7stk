<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arena Arena - Sistema de Combate</title>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Bungee', cursive; background: #111; margin: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        
        @keyframes shake {
            0% { transform: translate(2px, 2px); }
            25% { transform: translate(-2px, -2px); }
            50% { transform: translate(2px, -2px); }
            75% { transform: translate(-2px, 2px); }
            100% { transform: translate(0, 0); }
        }
        .shake { animation: shake 0.1s infinite; }
        .shake-heavy { animation: shake 0.05s infinite; }

        /* Arena aumentada para 600px para caber a fila maior */
        .arena { width: 800px; height: 600px; background-image: url('assets/Theme.png'); background-size: cover; border: 4px solid #ff0055; position: relative; overflow: hidden; box-shadow: 0 0 50px rgba(255, 0, 85, 0.3); }
        
        #txt-fight { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); color: #fff; font-size: 100px; text-shadow: 0 0 20px #ff0055, 4px 4px 0 #000; z-index: 1000; transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); pointer-events: none; }
        .show-fight { transform: translate(-50%, -50%) scale(1.2) !important; }
        
        .ui-vida { position: absolute; top: 15px; width: 100%; display: flex; justify-content: space-around; z-index: 300; }
        .barra-container { width: 220px; height: 14px; background: #333; border: 2px solid #000; }
        .barra-fill { height: 100%; background: #ff0055; transition: width 0.15s ease; width: 0%; }
        
        .quadrado-vitoria { display: inline-block; width: 20px; height: 20px; background: #ff0055; color: white; font-size: 14px; line-height: 20px; text-align: center; border: 1px solid #000; vertical-align: middle; margin: 0 5px; }
        
        .lutador { position: absolute; width: 350px; height: 350px; display: flex; flex-direction: column; justify-content: flex-end; align-items: center; z-index: 10; bottom: 160px; opacity: 0; transition: transform 0.3s ease; }
        #pos-p1 { left: -500px; }
        #pos-p2 { right: -500px; }
        
        .giant { transform: scale(1.2) !important; z-index: 20; }
        
        .sprite-img { width: 100%; height: auto; image-rendering: pixelated; }

        .efeito-cura { position: absolute; width: 200px; height: 200px; background: radial-gradient(circle, rgba(0,255,0,0.6) 0%, transparent 70%); z-index: 50; pointer-events: none; border-radius: 50%; animation: pulseCura 0.4s ease-out forwards; bottom: 50px; }
        @keyframes pulseCura { 0% { transform: scale(0.5); opacity: 0; } 50% { transform: scale(1.5); opacity: 1; } 100% { transform: scale(1.8); opacity: 0; } }

        .efeito-evolucao { position: absolute; width: 300px; height: 300px; background: radial-gradient(circle, #fff 0%, gold 40%, transparent 70%); z-index: 60; pointer-events: none; border-radius: 50%; animation: pulseEvolucao 0.8s ease-in-out forwards; bottom: 80px; }
        @keyframes pulseEvolucao { 0% { transform: scale(0); opacity: 0; } 50% { transform: scale(2); opacity: 1; } 100% { transform: scale(3); opacity: 0; } }

   /* Fila aumentada para 160px para caber os nomes */
 .container-fila { 
    position: absolute; 
    bottom: 0; 
    width: 100%; 
    height: 160px; 
    background: transparent; /* Alterado para transparente */
    border-top: 3px solid #ffffff; /* Alterado para branco */
    display: flex; 
    align-items: center; 
    padding: 0 10px; 
    z-index: 200; 
 }
 #lista-espera { list-style: none; display: flex; gap: 30px; margin: 0; padding: 0; align-items: flex-end; }
 
 .item-fila { display: flex; flex-direction: column; align-items: center; min-width: 150px; padding-bottom: 10px; }
 .mini-sprite { width: 150px; height: auto; image-rendering: pixelated; margin-bottom: -10px; }
 
/* Estilização do Nome na Fila - Ajustado para subir e descolar da borda */
.nome-fila { 
    color: white; 
    font-size: 14px; 
    background: rgba(0,0,0,0.8); 
    padding: 4px 12px; 
    text-transform: uppercase; 
    border: 2px solid #ffffff; 
    box-shadow: 2px 2px 0 #000;
    position: relative;
    z-index: 220;
    margin-top: -30px; /* Isso faz o nome subir em direção ao lutador */
    margin-bottom: 20px; /* Isso cria o espaço para descolar da borda da tela */
}
        
        .popup { position: absolute; font-size: 40px; text-shadow: 2px 2px 0 #000; z-index: 1000; animation: floatUp 0.4s forwards; font-weight: bold; pointer-events: none; }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-80px); opacity: 0; } }
        
        #bottom-bar { width: 800px; background: #000; padding: 10px; display: flex; justify-content: space-between; border: 1px solid #333; box-sizing: border-box; }
        .btn-config { background: #222; color: gold; border: 1px solid gold; padding: 5px 15px; cursor: pointer; font-family: 'Bungee'; transition: 0.2s; }
        
        .modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 480px; background: #1a1a1a; border: 2px solid gold; padding: 20px; z-index: 3000; display: none; color: white; box-shadow: 0 0 30px #000; }
        .mapping-item { display: flex; justify-content: space-between; background: #222; margin-bottom: 5px; padding: 5px; font-size: 12px; }
    </style>
</head>
<body onclick="audioHabilitado = true">

    <audio id="snd-fight"><source src="assets/fight-292375.mp3" type="audio/mpeg"></audio>
    <audio id="snd-hit"><source src="assets/sword-slice-2-393845.mp3" type="audio/mpeg"></audio>
    <audio id="snd-sword"><source src="assets/sword-slice-2-393845pp.mp3" type="audio/mpeg"></audio>
    <audio id="snd-heal"><source src="assets/heal-spell.mp3" type="audio/mpeg"></audio>
    <audio id="snd-shot"><source src="assets/gunshot-352466.mp3" type="audio/mpeg"></audio>

    <div class="arena" id="arena-main">
        <div id="txt-fight">FIGHT!</div>
        <div class="ui-vida">
            <div class="barra-container"><div class="barra-fill" id="fill-p1"></div></div>
            <div style="color: gold; font-size: 14px; margin-top: -5px;">VERSUS</div>
            <div class="barra-container"><div class="barra-fill" id="fill-p2"></div></div>
        </div>
        
        <div class="lutador" id="pos-p1">
            <div style="position: absolute; top: 100px; width: 100%; text-align: center;">
                <span id="nome-p1" style="color:#fff; text-shadow:2px 2px #000;"></span>
                <div id="win-p1" class="quadrado-vitoria">0</div>
            </div>
            <img src="" alt="" id="sprite-p1" class="sprite-img">
        </div>

        <div class="lutador" id="pos-p2">
            <div style="position: absolute; top: 100px; width: 100%; text-align: center;">
                <div id="win-p2" class="quadrado-vitoria">0</div>
                <span id="nome-p2" style="color:#fff; text-shadow:2px 2px #000;"></span>
            </div>
            <img src="" alt="" id="sprite-p2" class="sprite-img" style="transform: scaleX(-1);">
        </div>

        <div class="container-fila"><ul id="lista-espera"></ul></div>
    </div>

    <div id="bottom-bar">
        <div id="status-conn" style="color:red; font-size:12px;">● TIKFINITY DESCONECTADO</div>
        <button class="btn-config" onclick="toggleModal()">⚙️ CONFIGURAR</button>
    </div>

    <div id="configModal" class="modal">
        <h3 style="text-align:center; color:gold; margin-top:0;">COMANDOS</h3>
        <div style="display:flex; gap:5px; margin-bottom:10px;">
            <input type="text" id="new-trigger" placeholder="Ex: lutar" style="flex:1; padding:5px; color: black;">
            <select id="new-action" style="padding:5px; color: black;">
                <option value="SPAWN_RANDOM">Lutar (Sorteio)</option>
                <option value="SPAWN_FIGHTER">Lutador Normal</option>
                <option value="SPAWN_SWORD">Lutador de Espada</option>
                <option value="COMBO">Especial Combo</option>
                <option value="SHOOT">Especial Arma</option>
                <option value="HEAL_10">Cura 10%</option>
                <option value="HEAL_30">Cura 30%</option>
                <option value="HEAL_100">Cura 100%</option>
            </select>
            <button onclick="addMapping()" style="background:gold; padding:5px 10px; border: none; cursor: pointer;">+</button>
        </div>
        <div id="mapping-list" style="max-height: 150px; overflow-y: auto; margin-bottom: 10px;"></div>
        <button onclick="toggleModal()" style="width:100%; padding:10px; cursor: pointer;">FECHAR</button>
    </div>

    <script>
        // Lógica de combate e animação mantida exatamente como no original
        let hp1 = 0, hp2 = 0, p1Ocupado = false, p2Ocupado = false, audioHabilitado = false;
        let vitoriasP1 = 0, vitoriasP2 = 0, listaEspera = [], lutaIniciada = false, atacando = false;
        let eventMappings = JSON.parse(localStorage.getItem('arena_events')) || { "lutar": "SPAWN_RANDOM" };

        const CLASSES_DISPONIVEIS = ['fighter', 'sword'];
        const POS_COMBATE = "195px"; 
        const AVANCO_COMBO = 150; 

        const animData = {
            'IDLE': { start: 1, end: 8, folder: 'Idle' },
            'WALK': { start: 9, end: 16, folder: 'walk' },
            'RUN': { start: 17, end: 24, folder: 'run' },
            'ATTACK': { start: 65, end: 77, folder: 'combo' }, 
            'HURT': { start: 48, end: 51, folder: 'hit' },
            'DIE': { start: 52, end: 61, folder: 'death' },
            'SHOOT': { start: 65, end: 66, folder: 'shot' }
        };

        const state = {
            p1: { action: 'IDLE', frame: 1, tipo: "", nome: "", skinTemporaria: null, isGiant: false, vitoriasNoEstagio: 0 },
            p2: { action: 'IDLE', frame: 1, tipo: "", nome: "", skinTemporaria: null, isGiant: false, vitoriasNoEstagio: 0 }
        };

        async function evoluirLutador(p, novaClasse) {
            const el = document.getElementById(`pos-${p}`);
            const arena = document.getElementById('arena-main');
            arena.classList.add('shake-heavy');
            const evo = document.createElement('div');
            evo.className = 'efeito-evolucao';
            el.appendChild(evo);
            mostrarPopup(p, novaClasse === 'sword' ? "EVOLUÇÃO!" : "ELITE!", "gold");
            await new Promise(r => setTimeout(r, 800));
            state[p].tipo = 'sword'; 
            if (novaClasse === 'giant') { state[p].isGiant = true; el.classList.add('giant'); }
            evo.remove();
            arena.classList.remove('shake-heavy');
        }

        function aplicarCura(p, valor) {
            if (!state[p].nome) return;
            if (p === 'p1') { hp1 = Math.min(100, hp1 + valor); document.getElementById('fill-p1').style.width = hp1 + "%"; }
            else { hp2 = Math.min(100, hp2 + valor); document.getElementById('fill-p2').style.width = hp2 + "%"; }
            const el = document.getElementById(`pos-${p}`);
            const aura = document.createElement('div');
            aura.className = 'efeito-cura';
            el.appendChild(aura);
            if (audioHabilitado) { const s = document.getElementById('snd-heal'); if(s) { s.currentTime = 0; s.play(); } }
            mostrarPopup(p, `+${valor}% HP`, "#00ff00");
            setTimeout(() => aura.remove(), 400);
        }

        async function executarCombo(atk) {
            if (!lutaIniciada || atacando) return;
            let def = (atk === 'p1') ? 'p2' : 'p1';
            atacando = true;
            const elAtk = document.getElementById(`pos-${atk}`);
            const imgAtk = document.getElementById(`sprite-${atk}`);
            const arena = document.getElementById('arena-main');
            state[atk].action = 'RUN'; state[atk].frame = 17;
            elAtk.style.transition = (atk === 'p1') ? "left 0.12s linear" : "right 0.12s linear";
            const destino = (parseInt(POS_COMBATE) + AVANCO_COMBO) + "px";
            if(atk === 'p1') elAtk.style.left = destino; else elAtk.style.right = destino;
            await new Promise(r => setTimeout(r, 120));
            imgAtk.style.transform = (atk === 'p1') ? "scaleX(-1)" : "scaleX(1)";
            state[atk].action = 'ATTACK'; state[atk].frame = 65; 
            setTimeout(() => { 
                causarDano(def, 25, atk); 
                mostrarPopup(atk, "COMBO!", "#ff0055");
                arena.classList.add('shake');
                setTimeout(() => arena.classList.remove('shake'), 150);
            }, 50);
            await new Promise(r => setTimeout(r, 600));
            state[atk].action = 'RUN'; state[atk].frame = 17;
            elAtk.style.transition = (atk === 'p1') ? "left 0.15s ease-out" : "right 0.15s ease-out";
            if(atk === 'p1') elAtk.style.left = POS_COMBATE; else elAtk.style.right = POS_COMBATE;
            await new Promise(r => setTimeout(r, 150));
            imgAtk.style.transform = (atk === 'p1') ? "scaleX(1)" : "scaleX(-1)";
            state[atk].frame = 1; state[atk].action = 'IDLE';
            atacando = false;
        }

        async function especialArma(atk) {
            if (!state[atk].nome || !lutaIniciada || atacando) return;
            let def = (atk === 'p1') ? 'p2' : 'p1';
            atacando = true;
            const elAtk = document.getElementById(`pos-${atk}`);
            const imgAtk = document.getElementById(`sprite-${atk}`);
            imgAtk.style.transform = (atk === 'p1') ? "scaleX(-1)" : "scaleX(1)"; 
            state[atk].action = 'RUN'; state[atk].frame = 17;
            elAtk.style.transition = "0.2s linear";
            if(atk === 'p1') elAtk.style.left = "25px"; else elAtk.style.right = "25px";
            await new Promise(r => setTimeout(r, 200));
            state[atk].skinTemporaria = 'pistol'; 
            imgAtk.style.transform = (atk === 'p1') ? "scaleX(1)" : "scaleX(-1)";
            for(let i=0; i<2; i++) {
                state[atk].action = 'SHOOT'; state[atk].frame = 65;
                if (audioHabilitado) { const s = document.getElementById('snd-shot'); if(s){s.currentTime = 0; s.play();} }
                setTimeout(() => { causarDano(def, 15, atk); mostrarPopup(atk, "POW!", "orange"); }, 50);
                await new Promise(r => setTimeout(r, 300));
            }
            state[atk].skinTemporaria = null;
            imgAtk.style.transform = (atk === 'p1') ? "scaleX(1)" : "scaleX(-1)";
            state[atk].action = 'RUN'; state[atk].frame = 17;
            elAtk.style.transition = "0.2s ease-out";
            if(atk === 'p1') elAtk.style.left = POS_COMBATE; else elAtk.style.right = POS_COMBATE;
            await new Promise(r => setTimeout(r, 200));
            state[atk].frame = 1; state[atk].action = 'IDLE';
            atacando = false;
        }

        function causarDano(def, dano, atkId) {
            if (!lutaIniciada) return;
            if (def === 'p1') hp1 -= dano; else hp2 -= dano;
            document.getElementById(`fill-${def}`).style.width = Math.max(0, (def === 'p1' ? hp1 : hp2)) + "%";
            mostrarPopup(def, `-${dano}`, "#ff0055");
            if (audioHabilitado) {
                let som;
                if(atkId && (state[atkId].tipo === 'sword' || state[atkId].isGiant)) som = document.getElementById('snd-sword');
                else som = document.getElementById('snd-hit');
                if(som){ som.currentTime = 0; som.play(); }
            }
            if ((def === 'p1' ? hp1 : hp2) <= 0) {
                lutaIniciada = false; atacando = false;
                state[def].action = 'DIE'; state[def].frame = 52;
                const win = (def === 'p1' ? 'p2' : 'p1');
                if(win === 'p1') { vitoriasP1++; vitoriasP2 = 0; } else { vitoriasP2++; vitoriasP1 = 0; }
                state[win].vitoriasNoEstagio++;
                if (state[win].vitoriasNoEstagio >= 5) {
                    if (state[win].tipo === 'fighter') { evoluirLutador(win, 'sword'); state[win].vitoriasNoEstagio = 0; }
                    else if (state[win].tipo === 'sword' && !state[win].isGiant) { evoluirLutador(win, 'giant'); state[win].vitoriasNoEstagio = 0; }
                }
                setTimeout(() => aplicarCura(win, 20), 400);
                document.getElementById('win-p1').innerText = vitoriasP1;
                document.getElementById('win-p2').innerText = vitoriasP2;
                setTimeout(() => removerLutador(def), 1500);
            } else { state[def].action = 'HURT'; state[def].frame = 48; }
        }

        function handleAction(action, user, isTest = false) {
            if (action.startsWith("SPAWN_")) {
                let tipo = action.split("_")[1].toLowerCase();
                if (tipo === "random") tipo = CLASSES_DISPONIVEIS[Math.floor(Math.random() * CLASSES_DISPONIVEIS.length)];
                if(!isTest && (state.p1.nome === user || state.p2.nome === user || listaEspera.find(i => i.nome === user))) return;
                const novo = { nome: user, tipo: tipo };
                if (!p1Ocupado) { p1Ocupado = true; montarLutador('p1', novo); }
                else if (!p2Ocupado) { p2Ocupado = true; montarLutador('p2', novo); }
                else { listaEspera.push(novo); atualizarFila(); }
            } else if (action === "SHOOT") { 
                if(state.p1.nome === user) especialArma('p1'); else if(state.p2.nome === user) especialArma('p2');
            } else if (action === "COMBO") {
                if(state.p1.nome === user) executarCombo('p1'); else if(state.p2.nome === user) executarCombo('p2');
            } else if (action.startsWith("HEAL_")) {
                let v = parseInt(action.split("_")[1]);
                if(state.p1.nome === user) aplicarCura('p1', v); else if(state.p2.nome === user) aplicarCura('p2', v);
            }
        }

        function montarLutador(p, lutador) {
            const el = document.getElementById(`pos-${p}`);
            if (p === 'p1') hp1 = 100; else hp2 = 100;
            state[p].tipo = lutador.tipo; state[p].nome = lutador.nome; state[p].action = 'WALK'; state[p].frame = 9;
            state[p].isGiant = false; state[p].vitoriasNoEstagio = 0;
            el.classList.remove('giant');
            document.getElementById(`nome-${p}`).innerText = lutador.nome;
            document.getElementById(`fill-${p}`).style.width = "100%";
            el.style.transition = "none"; el.style.opacity = "1";
            if(p === 'p1') el.style.left = "-500px"; else el.style.right = "-500px";
            setTimeout(() => {
                el.style.transition = (p === 'p1') ? "left 3s linear" : "right 3s linear";
                if(p === 'p1') el.style.left = POS_COMBATE; else el.style.right = POS_COMBATE;
            }, 50);
            setTimeout(() => {
                state[p].action = 'IDLE'; state[p].frame = 1;
                if(p1Ocupado && p2Ocupado && !lutaIniciada) iniciarLuta();
            }, 3050);
        }

        setInterval(() => {
            ['p1', 'p2'].forEach(p => {
                const s = state[p]; if (!s.tipo || !s.nome) return;
                const img = document.getElementById(`sprite-${p}`);
                const conf = animData[s.action] || animData['IDLE'];
                let lutadorAtual = s.skinTemporaria ? s.skinTemporaria : s.tipo;
                const frameFormatado = String(s.frame).padStart(4, '0');
                img.src = `assets/${lutadorAtual}_${conf.folder}_${frameFormatado}.png`;
                img.style.visibility = "visible";
                s.frame++;
                if (s.frame > conf.end) {
                    if (['ATTACK', 'SHOOT', 'HURT'].includes(s.action)) { s.action = 'IDLE'; s.frame = 1; }
                    else if (s.action === 'DIE') s.frame = conf.end;
                    else s.frame = conf.start;
                }
            });
        }, 50);

        setInterval(() => {
            if (!lutaIniciada || atacando) return;
            const atk = Math.random() > 0.5 ? 'p1' : 'p2';
            const def = (atk === 'p1') ? 'p2' : 'p1';
            let danoBase = 10;
            if (state[atk].isGiant) danoBase = 20;
            else if (state[atk].tipo === 'sword') danoBase = 15;
            state[atk].action = 'ATTACK'; state[atk].frame = 65;
            setTimeout(() => { if (lutaIniciada && !atacando) causarDano(def, danoBase, atk); }, 250);
        }, 800);

        function removerLutador(p) {
            const el = document.getElementById(`pos-${p}`);
            el.style.transition = "opacity 0.4s"; el.style.opacity = "0";
            setTimeout(() => {
                if (p === 'p1') p1Ocupado = false; else p2Ocupado = false;
                state[p].tipo = ""; state[p].nome = ""; 
                document.getElementById(`sprite-${p}`).src = "";
                if (listaEspera.length > 0) {
                    const novo = listaEspera.shift();
                    if(p === 'p1') p1Ocupado = true; else p2Ocupado = true;
                    montarLutador(p, novo);
                }
                atualizarFila();
            }, 500);
        }

        function iniciarLuta() {
            const txt = document.getElementById('txt-fight');
            txt.classList.add('show-fight');
            if (audioHabilitado) { const f = document.getElementById('snd-fight'); if(f) f.play(); }
            setTimeout(() => { txt.classList.remove('show-fight'); lutaIniciada = true; }, 600);
        }

        // FUNÇÃO ATUALIZADA: Agora gera o HTML com o nome e imagem
        function atualizarFila() { 
            document.getElementById('lista-espera').innerHTML = listaEspera.map(l => 
                `<li class="item-fila">
                    <img src="assets/${l.tipo}_Idle_0001.png" class="mini-sprite">
                    <span class="nome-fila">${l.nome}</span>
                </li>`).join(''); 
        }
        
        function mostrarPopup(p, txt, cor) { const pop = document.createElement('div'); pop.className = 'popup'; pop.innerText = txt; pop.style.color = cor; const rect = document.getElementById(`pos-${p}`).getBoundingClientRect(); pop.style.left = (rect.left + 150) + "px"; pop.style.top = (rect.top + 50) + "px"; document.body.appendChild(pop); setTimeout(() => pop.remove(), 400); }
        function toggleModal() { const m = document.getElementById('configModal'); m.style.display = (m.style.display === 'block') ? 'none' : 'block'; if(m.style.display === 'block') renderMappingList(); }
        function addMapping() { const t = document.getElementById('new-trigger').value.toLowerCase().trim(); const a = document.getElementById('new-action').value; if(t) { eventMappings[t] = a; localStorage.setItem('arena_events', JSON.stringify(eventMappings)); renderMappingList(); document.getElementById('new-trigger').value = ""; } }
        function renderMappingList() { const listDiv = document.getElementById('mapping-list'); listDiv.innerHTML = Object.entries(eventMappings).map(([trigger, action]) => `<div class="mapping-item"><span>${trigger} ➔ ${action}</span><button onclick="removeMapping('${trigger}')" style="background:red; color:white; border:none; padding:2px 5px; cursor:pointer;">X</button></div>`).join(''); }
        function removeMapping(t) { delete eventMappings[t]; localStorage.setItem('arena_events', JSON.stringify(eventMappings)); renderMappingList(); }

        function connectTikFinity() {
            const socket = new WebSocket('ws://localhost:21213/');
            socket.onopen = () => { document.getElementById('status-conn').style.color = '#2ecc71'; document.getElementById('status-conn').innerText = '● TIKFINITY CONECTADO'; };
            socket.onmessage = (e) => {
                const res = JSON.parse(e.data); if (!res.data) return;
                const user = res.data.nickname || res.data.username;
                const trigger = (res.event === "chat") ? res.data.comment : (res.event === "gift" ? res.data.giftName : res.event);
                const action = eventMappings[trigger?.toLowerCase().trim()];
                if (action) handleAction(action, user);
            };
            socket.onclose = () => setTimeout(connectTikFinity, 3000);
        }
        window.onload = connectTikFinity;

        window.addEventListener('keydown', (e) => { 
            if (e.key === '9') handleAction("SPAWN_RANDOM", "Teste_"+Math.floor(Math.random()*99), true);
            if (e.key === '1' && p1Ocupado) executarCombo('p1');
            if (e.key === '2' && p2Ocupado) executarCombo('p2');
            if (e.key === '4' && p1Ocupado) especialArma('p1');
            if (e.key === '5' && p2Ocupado) especialArma('p2');
        });
    </script>
</body>
</html>